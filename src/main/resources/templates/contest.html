<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>공공재 메인페이지</title>
  <!-- ✅ CSS 경로 (웹 루트 기준) -->
  <link rel="stylesheet" th:href="@{/css/mainPage.css}">
  <link rel="stylesheet" th:href="@{/css/sidebar.css}">
  <!-- ✅ JS 경로 (웹 루트 기준) -->
  <script defer th:src="@{/js/sidebar.js}"></script>
  <script defer th:src="@{/js/mainPage.js}"></script>
</head>
<body>
<div class="container">

  <div sec:authorize="isAuthenticated()">
    <aside class="sidebar">
      <div class="logo-area">
        <a th:href="@{/main}">
          <img th:src="@{/images/reallogo.png}" alt="공공재 로고" class="logo" />
        </a>
      </div>

      <nav>
        <ul class="menu">
          <li class="active">
            <a th:href="@{/main}" class="menu-item">
              <div class="left">
                <img th:src="@{/images/Home_Blue.png}" class="icon" alt="홈" />
                <span>홈</span>
              </div>
            </a>
          </li>

          <li class="dropdown">
            <div class="menu-item dropdown-toggle">
              <div class="left">
                <img th:src="@{/images/Trophy.png}" class="icon" alt="공모전" />
                <span>공모전 페이지</span>
              </div>
              <img th:src="@{/images/toggle.png}"
                   class="arrow-icon"/>
            </div>
            <ul class="submenu">
              <li><a th:href="@{/recruit_info}" style="text-decoration: none; color: inherit;">공모전 정보</a></li>
              <li><a th:href="@{/recruit}" style="text-decoration: none; color: inherit;">공모전 팀원 모집</a></li>
            </ul>
          </li>

          <li>
            <div class="menu-item">
              <div class="left">
                <img th:src="@{/images/human.png}" class="icon" alt="포트폴리오" />
                <a th:href="@{/portfolio}">나의 포트폴리오</a>
              </div>
            </div>
          </li>

          <li class="dropdown">
            <div class="menu-item dropdown-toggle">
              <div class="left">
                <img th:src="@{/images/Group_human.png}" class="icon" alt="커뮤니티" />
                <a th:href="@{/community}">커뮤니티</a>
              </div>
              <img th:src="@{/images/toggle.png}" class="arrow-icon" />
            </div>
            <ul class="submenu">
              <li>스터디원 모집</li>
              <li>Q&amp;A</li>
              <li>공모전 후기</li>
            </ul>
          </li>


        </ul>
      </nav>

      <div class="logout-section">
        <button class="logout-btn" aria-label="로그아웃">
          <img th:src="@{/images/logOut.png}" class="logout-icon" />
          로그아웃
        </button>
      </div>
    </aside>
    <main>
      <header id="contest_header">
          <h1>Contest</h1>
      </header>

      &lt;!&ndash; ✅ 버튼 그룹 + 검색 입력창 &ndash;&gt;
      <div class="contest_section">

          &lt;!&ndash; ✅ 전체 공모전 리스트 &ndash;&gt;
          <div class="contest_list" id="allContestsList">
              <div th:each="contest : ${contests}" class="card_wrapper">
                  <div class="card_inner">
                      <div class="card_front">
                          <img th:src="@{${contest.imgSrc}}" alt="포스터" />
                          <div class="card_tag" th:text="'#' + ${contest.info['분야']}"></div>
                          <div class="card_title" th:text="${contest.title}"></div>
                          <div class="card_dday" th:text="'D-' + ${contest.dday}"></div>
                      </div>
                      <div class="card_back">
                          <p th:text="'총 상금: ' + ${contest.prize}"></p>
                          <p th:text="'지원자격: ' + ${contest.info['응모대상']}"></p>
                          <p th:text="'주최: ' + ${contest.organizer}"></p>
                          <p th:text="'조회수: ' + ${contest.readCount}"></p>
                          <p th:if="${contest.info['홈페이지'] != null}">
                              <a th:href="${contest.info['홈페이지']}" target="_blank">홈페이지</a>
                          </p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </main>
  </div>
</div>

<script th:inline="javascript">


</script>
</body>
</html>
