<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>공공재 메인페이지</title>
    <!-- ✅ CSS 경로 (웹 루트 기준) -->
    <link rel="stylesheet" th:href="@{/css/portfolio.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
</head>

<body>
<div class="container">
    <!-- 비로그인 상태일 때 사이드바 -->
    <aside class="sidebar">
        <div class="logo-area">
            <a th:href="@{/main}">
                <img th:src="@{/images/reallogo.png}" alt="공공재 로고" class="logo" />
            </a>
        </div>

        <nav>
            <ul class="menu">
                <li class="active">
                    <a th:href="@{/main}" class="menu-item">
                        <div class="left">
                            <img th:src="@{/images/Home_Blue.png}" class="icon" alt="홈" />
                            <span>홈</span>
                        </div>
                    </a>
                </li>

                <li class="dropdown">
                    <div class="menu-item dropdown-toggle">
                        <a th:href="@{/main}" class="menu-item">
                            <div class="left">
                                <img th:src="@{/images/Trophy.png}" class="icon" alt="공모전" />
                                <span>공모전 페이지</span>
                            </div>
                        </a>
                        <img th:src="@{/images/toggle.png}"
                             class="arrow-icon"/>
                    </div>
                    <ul class="submenu">
                        <li><a th:href="@{/recruit_info}" style="text-decoration: none; color: inherit;">공모전 정보</a></li>
                        <li><a th:href="@{/recruit}" style="text-decoration: none; color: inherit;">공모전 팀원 모집</a></li>
                    </ul>
                </li>

                <li>
                    <div class="menu-item">
                        <div class="left">
                            <img th:src="@{/images/human.png}" class="icon" alt="포트폴리오" />
                            <a th:href="@{/portfolio}">나의 포트폴리오</a>
                        </div>
                    </div>
                </li>

                <li class="dropdown">
                    <div class="menu-item dropdown-toggle">
                        <div class="left">
                            <img th:src="@{/images/Group_human.png}" class="icon" alt="커뮤니티" />
                            <a th:href="@{/community}">커뮤니티</a>
                        </div>
                        <img th:src="@{/images/toggle.png}" class="arrow-icon" />
                    </div>
                    <ul class="submenu">
                        <li>스터디원 모집</li>
                        <li>Q&amp;A</li>
                        <li>공모전 후기</li>
                    </ul>
                </li>


            </ul>
        </nav>

        <div class="logout-section">
            <button class="logout-btn" aria-label="로그아웃">
                <img th:src="@{/images/logOut.png}" class="logout-icon" />
                로그아웃
            </button>
        </div>
    </aside>

    <main class="main-content">
        <div class="portfolio-header">
            <div class="inner-container">
                <h1>Portfolio</h1>
            </div>
        </div>

        <div class="portfolio-body">
            <div class="user-info">
                <div class="user-text">
                    <p class="name-input" th:text="${name}"></p>
                    <div class="about-box">
                        <p class="about-title">about me</p>
                        <div class="about-textarea">
                            <p th:text="${about}"></p>
                        </div>
                    </div>
                </div>

                <div class="user-photo-skill">
                    <div class="photo-box">
                        <img id="profilePreview" th:src="@{'/uploads/' + ${profileImage}}" alt="프로필 이미지">
                    </div>

                    <div class="skills-section">
                        <div class="skills" id="skillList">
                            <div th:if="${skills != null and !skills.isEmpty()}">
                                <div th:each="skill : ${skills}" class="skill-button" th:style="'background-color:' + ${skill.color}">
                                    <p class="skill-input" th:text="${skill.name}">skill</p>
                                </div>
                            </div>
                            <p th:if="${skills == null or skills.isEmpty()}">empty</p>
                        </div>
                    </div>
                </div>
            </div>
            <hr />

            <section class="project-add-section">
                <div id="project-card-container">
                    <div th:if="${projects != null and !projects.isEmpty()}" th:each="project : ${projects}" class="project-added-card show">
                        <div class="project-label">
                            <input type="text" class="project-title-input" th:value="${project.title}" readonly />
                        </div>
                        <hr class="project-divider" />
                        <div class="project-detail">
                            <textarea class="project-description" readonly th:text="${project.description}"></textarea>
                        </div>
                    </div>
                    <p th:if="${projects == null or projects.isEmpty()}">프로젝트가 없습니다.</p>
                </div>
            </section>

            <div style="text-align: right; margin: 0 0;">
                <form th:action="@{/editPortfolio}" method="get">
                    <input type="hidden" name="id" th:value="${userId}">
                    <button class="btn edit" id="editBtn">수정하기</button>
                </form>
            </div>
        </div>
    </main>
</div>

<!-- ✅ JS 경로 (웹 루트 기준) -->
<script th:src="@{/js/portfolio.js}"></script>
</body>
</html>
